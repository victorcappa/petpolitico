using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class Popularidade : MonoBehaviour
{

    public Text pop_txtUI;
    //public Sprite iconPopularidade; COLOCAR ISSO NO SCRIPT MENU STATUS
    public float veloPerdaPop = 0.1f;
    public float popularidade = 100;
    public float max_pop = 100;
    public float min_pop = 0;
    //public GameObject tempPersonagem;

   /* private void Awake()
    {
        PlayerPrefs.SetFloat("VeloPerdaPop", veloPerdaPop);

    }*/

    void Start()
    {
        //PlayerPrefs.DeleteAll();

        PopPersonagens();
  

    }

    // Update is called once per frame1 
    void Update()
    {

        PopPersonagens();

       // GanhaPopularidade();       
        MaxMinPop();
    }

    void MaxMinPop()
    {
        if (popularidade <= min_pop)
        {
            popularidade = min_pop;
        }

        if (popularidade >= max_pop)
        {
            popularidade = max_pop;
        }
    }


    public void PopPersonagens()

    {

        if (PlayerPrefs.GetInt("LulaDentroScene") == 1)

        {
            popularidade = PlayerPrefs.GetFloat("PopularidadeLula");
            float tempPopularidade = Mathf.Round(PlayerPrefs.GetFloat("PopularidadeLula"));
            pop_txtUI.text = (tempPopularidade.ToString() + "%");


            veloPerdaPop = PlayerPrefs.GetFloat("VeloPerdaPop");

            popularidade = PlayerPrefs.GetFloat("PopularidadeLula");
            popularidade -= Time.deltaTime * veloPerdaPop;
            PlayerPrefs.SetFloat("PopularidadeLula", popularidade);

            if (PlayerPrefs.GetFloat("PopularidadeLula") <= 0)
            {
                PlayerPrefs.SetFloat("PopularidadeLula", 0);
            }

            // VERIFICAR SE É A PRIMEIRA VEZ QUE JOGA

            if (PlayerPrefs.GetInt("LevelLula") == 0 && PlayerPrefs.GetFloat("PopularidadeLula") <= 0)
            {
                PlayerPrefs.SetFloat("PopularidadeLula", 100);
            }

        }
      
        
        if (PlayerPrefs.GetInt("CiroDentroScene") == 1)
        {
            popularidade = PlayerPrefs.GetFloat("PopularidadeCiro");
            float tempPopularidade = Mathf.Round(PlayerPrefs.GetFloat("PopularidadeCiro"));
            pop_txtUI.text = (tempPopularidade.ToString() + "%");

            int tempPopCiro = (int)tempPopularidade;
            PlayerPrefs.SetInt("TempPopCiro", tempPopCiro);


            veloPerdaPop = PlayerPrefs.GetFloat("VeloPerdaPop");

            popularidade = PlayerPrefs.GetFloat("PopularidadeCiro");
            popularidade -= Time.deltaTime * veloPerdaPop;
            PlayerPrefs.SetFloat("PopularidadeCiro", popularidade);

            if (PlayerPrefs.GetFloat("PopularidadeCiro") <= 0)
            {
                PlayerPrefs.SetFloat("PopularidadeCiro", 0);
            }

            // VERIFICAR SE É A PRIMEIRA VEZ QUE JOGA

            if (PlayerPrefs.GetInt("LevelCiro") == 0 && PlayerPrefs.GetFloat("PopularidadeCiro") <= 0)
            {
                PlayerPrefs.SetFloat("PopularidadeCiro", 100);
            }


        }

      
        if (PlayerPrefs.GetInt("BolsoDentroScene") == 1)
        {
            
            popularidade = PlayerPrefs.GetFloat("PopularidadeBolsonaro");
            float tempPopularidade = Mathf.Round(PlayerPrefs.GetFloat("PopularidadeBolsonaro"));
            pop_txtUI.text = (tempPopularidade.ToString() + "%");

            veloPerdaPop = PlayerPrefs.GetFloat("VeloPerdaPop");

            popularidade = PlayerPrefs.GetFloat("PopularidadeBolsonaro");
            popularidade -= Time.deltaTime * veloPerdaPop;
            PlayerPrefs.SetFloat("PopularidadeBolsonaro", popularidade);

            if (PlayerPrefs.GetFloat("PopularidadeBolsonaro") <= 0)
            {
                PlayerPrefs.SetFloat("PopularidadeBolsonaro", 0);
            }

            // VERIFICAR SE É A PRIMEIRA VEZ QUE JOGA


            if (PlayerPrefs.GetInt("LevelBolso") == 0 && PlayerPrefs.GetFloat("PopularidadeBolsonaro") <= 0)
            {
                PlayerPrefs.SetFloat("PopularidadeBolsonaro", 100);
            }

        }





    }

}
